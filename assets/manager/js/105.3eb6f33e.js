"use strict";(self["webpackChunkblog_manager"]=self["webpackChunkblog_manager"]||[]).push([[105],{6105:function(t,e,a){a.r(e),a.d(e,{default:function(){return x}});var i=a(6521),l=a(1689),s=a(8834),r=a(1526),c=a(6278),o=a(6928),n=a(4155),d=a(8230),m=a(8412),h=a(9940),g=function(){var t=this,e=t._self._c;return e(c.A,[e(m.A,[e(r.A,{attrs:{cols:"12"}},[e(i.A,{staticClass:"primary",attrs:{to:"/new-article"}},[t._v(" 新增文章 ")])],1)],1),e(m.A,[e(r.A,{attrs:{cols:"12"}},[e(l.A,[e(s.ri,[t._v("筛选")]),e(s.OQ,[e(d.A,{ref:"form"},[e(h.A,{attrs:{label:"标题包含"},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}}),e(h.A,{attrs:{label:"标签包含"},model:{value:t.searchTag,callback:function(e){t.searchTag=e},expression:"searchTag"}}),e(m.A,[e(r.A,{attrs:{cols:"6"}},[e(i.A,{attrs:{color:"primary",block:""},on:{click:t.filterItems}},[t._v("筛选")])],1),e(r.A,{attrs:{cols:"6"}},[e(i.A,{attrs:{color:"error",block:""},on:{click:t.resetFilter}},[t._v("重置")])],1)],1)],1)],1)],1)],1)],1),e(m.A,[e(r.A,{attrs:{cols:"12"}},[e(l.A,[e(s.ri,[t._v("Table")]),e(s.OQ,[e(o.A,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.articleList,"items-per-page":10},scopedSlots:t._u([{key:"item.actions",fn:function({item:a}){return[e(i.A,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v("编辑")])]}}])})],1)],1)],1)],1),e(n.A,{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(l.A,[e(s.ri,[t._v("Edit")]),e(s.OQ,[e(h.A,{attrs:{label:"ID",disabled:""},model:{value:t.editingItem.id,callback:function(e){t.$set(t.editingItem,"id",e)},expression:"editingItem.id"}}),e(h.A,{attrs:{label:"标题",disabled:""},model:{value:t.editingItem.title,callback:function(e){t.$set(t.editingItem,"title",e)},expression:"editingItem.title"}}),e(m.A,[e(r.A,{attrs:{col:"12"}},[e(i.A,{attrs:{color:"success"},on:{click:function(e){return t.saveEdit(t.editingItem.id)}}},[t._v("编辑")])],1)],1),e(m.A,[e(r.A,{attrs:{col:"12"}},[e(i.A,{attrs:{color:"error"},on:{click:function(e){t.dialog=!t.dialog}}},[t._v("取消")])],1)],1),e(m.A,[e(r.A,{attrs:{col:"12"}},[e(h.A,{attrs:{label:"导出到邮箱"},model:{value:t.exportEmail,callback:function(e){t.exportEmail=e},expression:"exportEmail"}})],1)],1),e(m.A,[e(r.A,{attrs:{col:"12"}},[e(i.A,{attrs:{color:"primary"},on:{click:t.exportArticle}},[t._v("导出")])],1)],1)],1)],1)],1)],1)},A=[],u=(a(4114),a(696)),p={name:"TemplatePage",data(){return{dialog:!1,editDialog:!1,editingItem:{id:"",title:"",tags:[],decrypted:""},articleList:[],searchName:"",searchTag:"",exportEmail:"",headers:[{text:"编号",value:"id"},{text:"标题",value:"title"},{text:"标签",value:"tags"},{text:"是否加密",value:"decrypted"},{text:"Actions",value:"actions",sortable:!1}]}},methods:{filterItems(){const t=this.searchName.toLowerCase(),e=this.searchTag.toLowerCase();this.articleList=this.articleList.filter((a=>{const i=a.title.toLowerCase().includes(t),l=a.tags.some((t=>t.toLowerCase().includes(e)));return i&&l}))},resetFilter(){this.searchName="",this.searchTag="",this.fetchAllArticle()},saveEdit(t){this.$router.push("/new-article?id="+t)},editItem(t){this.editingItem=t,this.editDialog=!0,this.dialog=!0},showDialog(){this.dialog=!0},closeDialog(){this.dialog=!1},exportArticle(){u.A.get("/article/migrate?email="+this.exportEmail+"&id="+this.editingItem.id).then((t=>{console.log(t.data),200===t.status&&alert("导出成功 ID:"+t.data.bg_id)})).catch((t=>{}))},createItem(){},fetchAllArticle(){u.A.get("/article/all").then((t=>{this.articleList=t.data,this.articleList.forEach((t=>{t.decrypted=t.decrypted?"是":"否",t.tags.length>0?t.tags=JSON.parse(t.tags.replace(/'/g,'"')):t.tags=[]}))})).catch((t=>{}))}},created(){this.fetchAllArticle()}},f=p,v=a(1656),b=(0,v.A)(f,g,A,!1,null,null,null),x=b.exports}}]);
//# sourceMappingURL=105.3eb6f33e.js.map